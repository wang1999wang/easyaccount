!function(e){e.mcConfig={resBasePath:"/r",libBasePath:"rlib",mcBasePath:"rlib",domain:"www.uu.com.cn",resDomain:"www.uu.com.cn",ydzDomain:"e.uu.com.cn",eeDomain:"ee.uu.com.cn",cookieDomain:".uu.com.cn",ws:"http://im.chanjeter.com"}}(this||window),function(e){var t=function(){};e.MC=t;var i=e.mcConfig||{};t.config=function(e,n){return 1===arguments.length?i[e]:t.isObject(e)?(t.merge(i,e),void 0):(t.isEmpty(e)||(i[e]=n),void 0)};var n={};t.cache=function(e,i){return 1===arguments.length?n[e]:(t.isEmpty(e)||(n[e]=i),void 0)};var s=0;t.genId=function(e){var t=(e||"mc")+ ++s;return t}}(this||window),function(e){var t={isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e&&isFinite(e)},isBoolean:function(e){return"boolean"==typeof e},isDate:function(e){return"[object Date]"===Object.prototype.toString.apply(e)},isObject:function(e){return"[object Object]"===Object.prototype.toString.call(null)?null!==e&&void 0!==e&&"[object Object]"===Object.prototype.toString.call(e)&&void 0===e.ownerDocument:"[object Object]"===Object.prototype.toString.call(e)},isArray:function(e){return"[object Array]"===Object.prototype.toString.apply(e)},isFunction:function(e){return"[object Function]"===Object.prototype.toString.apply(e)},isEmpty:function(t,i){if("undefined"==typeof t||null===t||(i?!1:""===t)||e.isArray(t)&&0===t.length)return!0;if(e.isObject(t)){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n))return!1;return!0}return!1},isBlank:function(t){return e.isEmpty(t)?!0:e.isEmpty(String(t).replace(/^\s+|\s+$/g,""))},isDefined:function(e){return"undefined"!=typeof e},isWindow:function(e){if("undefined"==typeof e.closed)return!1;var t=/\[object (window|global)\]/i.test(Object.prototype.toString.call(e));if(t)return t;try{return e.closed=e.closed,!1}catch(i){t=!0}return t}},i={each:function(t,i,n){if(!e.isEmpty(t)&&i)if(e.isArray(t))for(var s=0,o=t.length;o>s;s++)try{if(i.call(n,t[s],s,t)===!1)return}catch(r){e.error(r)}else for(var a in t)if(t.hasOwnProperty(a))try{if(i.call(n,t[a],a,t)===!1)return}catch(r){e.error(r)}},merge:function(t,i,n){if(!t||!i||"object"!=typeof i)return t;if(n){var s,o;for(s in i)i.hasOwnProperty(s)&&(o=i[s],e.isObject(o)&&e.isObject(t[s])?e.merge(t[s],o,n):t[s]=o)}else for(var r in i)t[r]=i[r];return t},clone:function(t){return e.merge({},t)},inherit:function(e,t){"function"==typeof e||(e=function(){});var i=function(){e.apply(this,arguments)};i.superclass=e.prototype;var n=function(){};if(n.prototype=e.prototype,i.prototype=new n,i.prototype.constructor=i,t&&"object"==typeof t)for(var s in t)i.prototype[s]=t[s];return i}},n={log:function(){"undefined"!=typeof console&&null!==console&&console.log&&undefined},error:function(t,i){!e.isEmpty(i)&&e.log(i),"undefined"!=typeof console&&null!==console&&console.error&&undefined}};i.merge(e,t),i.merge(e,i),i.merge(e,n)}((this||window).MC),function(global){var MC=global.MC;"indexOf"in global.Array.prototype||(global.Array.prototype.indexOf=function(e,t){for(var i=this.length,n=0>t?Math.max(0,i+t):t||0;i>n;n++)if(this[n]===e)return n;return-1}),"forEach"in global.Array.prototype||(global.Array.prototype.forEach=function(e){MC.each(this,function(t,i){e&&e(t,i,this)},this)});var useHasOwn=!!{}.hasOwnProperty,isNative,pad,doDecode,doEncode,m,charToReplace=/[\\\"\x00-\x1f\x7f-\uffff]/g,encodeString,encodeArray,encodeObject,encodeDate;isNative=function(){var e=null;return function(){return null===e&&(e=global.JSON&&"[object JSON]"==JSON.toString()),e}}(),pad=function(e){return 10>e?"0"+e:e},doDecode=function(json){return eval("("+json+")")},doEncode=function(e){return MC.isDefined(e)&&null!==e?MC.isArray(e)?encodeArray(e):MC.isDate(e)?encodeDate(e):MC.isString(e)?encodeString(e):"number"==typeof e?isFinite(e)?String(e):"null":MC.isBoolean(e)?String(e):MC.isObject(e)?encodeObject(e):"function"==typeof e?"null":"undefined":"null"},m={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\","":"\\u000b"},encodeString=function(e){return'"'+e.replace(charToReplace,function(e){var t=m[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"'},encodeArray=function(e){var t,i=["[",""],n=e.length;for(t=0;n>t;t+=1)i.push(doEncode(e[t]),",");return i[i.length-1]="]",i.join("")},encodeObject=function(e){var t,i=["{",""];for(t in e)(!useHasOwn||e.hasOwnProperty(t))&&i.push(doEncode(t),":",doEncode(e[t]),",");return i[i.length-1]="}",i.join("")},encodeDate=function(e){return'"'+e.getFullYear()+"-"+pad(e.getMonth()+1)+"-"+pad(e.getDate())+" "+pad(e.getHours())+":"+pad(e.getMinutes())+":"+pad(e.getSeconds())+'"'},isNative()||(global.JSON={},global.JSON.stringify=doEncode,global.JSON.parse=doDecode)}(this||window),function(e){var t=function(e){this.name=e,this.handles=[]};e.merge(t.prototype,{on:function(t){e.isFunction(t)&&this.handles.push(t)},off:function(){arguments.length<=0?this.handles.length=0:Array.prototype.forEach.call(arguments,function(e){var t=this.handles.indexOf(e);t>=0&&this.handles.splice(t)})},trigger:function(){var e=arguments.length>0?Array.prototype.slice.call(arguments,0):[];this.handles.forEach(function(t){t.apply(null,e)})},once:function(){this.trigger.apply(this,arguments),this.off()}});var i=function(i){var n=function(t){if(e.isEmpty(t)||e.isEmpty(this.events))return null;this.events||(this.events={});var i=this.events[t];return i?i:null};e.merge(i,{on:function(i,n){if(e.isEmpty(i)||!e.isFunction(n))return this;this.events||(this.events={});var s=this.events[i];return!s&&(s=this.events[i]=new t(i)),s.on(n),this},off:function(e){var t=n.call(this,e);return t?(t.off(),this):this},trigger:function(e){var t=n.call(this,e);return t?(t.trigger.apply(t,arguments.length>1?Array.prototype.slice.call(arguments,1):[]),this):this},once:function(e){var t=n.call(this,e);return t?(t.once.apply(t,arguments.length>1?Array.prototype.slice.call(arguments,1):[]),this):this}})},n=function(){},s=new n;i(n.prototype),t.on=s.on,t.off=s.off,t.trigger=s.trigger,t.once=s.once,e.Event=t,e.eventSupport=i,t.support=i}((this||window).MC),function(e){var t={PENDING:0,FULFILLED:1,REJECTED:2},i=function(i){this.status=t.PENDING,this.succTasks=[],this.failTasks=[],this.chainArg=null,e.isFunction(i)&&i.call(this)};e.merge(i.prototype,{then:function(i,n){var s=null;return e.isFunction(i)&&this.succTasks.push(i),e.isFunction(n)&&this.failTasks.push(n),this.status!==t.PENDING&&(s=this.exec()),s||this},resolve:function(e){return void 0!==e&&(this.chainArg=e),this._onResolve()},reject:function(e){return void 0!==e&&(this.chainArg=e),this._onReject()},exec:function(){if(this.status===t.PENDING)return this;for(var n=null,s=this.status===t.REJECTED?this.failTasks:this.succTasks;s.length>0;){var o=s.shift();try{var r=o.call(null,this.chainArg);r instanceof i?n=r:this.chainArg=r}catch(a){e.error(a),n=i.reject(this.chainArg)}finally{o=null}if(n){n.succTasks=n.succTasks.concat(this.succTasks),n.failTasks=n.failTasks.concat(this.failTasks),n.exec(),this._clear();break}}return n||this},isResolved:function(){return this.status!==t.PENDING},destroy:function(){this._clear()},_onResolve:function(){return this.status===t.PENDING&&(this.status=t.FULFILLED),this.exec()},_onReject:function(){return this.status===t.PENDING&&(this.status=t.REJECTED),this.exec()},_clear:function(){this.succTasks.length=0,this.failTasks.length=0,this.chainArg=null}}),e.merge(i,{resolve:function(e){return(new i).resolve(e)},reject:function(e){return(new i).reject(e)},all:function(t){var n=new i,s=t.length;return e.each(t,function(e){return e?(e.then(function(){--s<=0&&n.resolve()},function(){n.reject()}),void 0):(--s<=0&&n.resolve(),void 0)}),n}}),e.Promise=i}((this||window).MC),function(e){var t=null,i=null,n=null,s={},o={INIT:0,LOADING:1,LOADED:2,COMPLETE:3},r=function(t){{var s=g(t,"css");new e.Promise}e.isEmpty(s)||(h(),e.each(t,function(e){var t=document.createElement("link");t.rel="stylesheet",t.type="text/css",t.href=e,i.insertBefore(t,n),p(e)}))},a=function(t){var n=new e.Promise,o=g(t,"js");if(e.isEmpty(o))return n.resolve(),n;if(h(),u())return c(o,n),n;var r=o.length;return e.each(o,function(t){var o=s[t];o&&o.then(function(){--r<=0&&n.resolve()}),s[t]=new e.Promise;var a=document.createElement("script");a.async=!1,a.type="text/javascript",a.src=t,a.onload=function(){a.onload=a.onerror=null,--r<=0&&n.resolve(),s[t].resolve().destroy(),delete s[t],f(t)},a.onerror=function(){a.onload=a.onerror=null,n.reject(),e.error(null,t+" load failure")},i.appendChild(a)}),n},c=function(t,i){var n={chain:[],cursor:0,length:t.length};e.each(t,function(t,r){var a={src:t,status:o.INIT};n.chain.push(a);var c=s[t];return c?(a.status=o.LOADING,c.then(function(){a.status=o.LOADED,l(n,i)}),void 0):(s[t]=new e.Promise,a.status=o.LOADING,setTimeout(function(){var e=document.createElement("script");a.script=e,e.type="text/javascript",0==r?d(n,i,!0):(e.onreadystatechange=function(){"loaded"==e.readyState&&(a.status=o.LOADED,l(n,i))},e.src=t)},400),void 0)})},d=function(e,t,r){var a=e.cursor,c=e.chain[a],d=c.script;return null==d?(c.status=o.COMPLETE,a>=e.length-1&&t.resolve(),void 0):(c.script=null,d.onreadystatechange=function(){("loaded"==d.readyState||"complete"==d.readyState)&&(d.onreadystatechange=null,c.status=o.COMPLETE,f(c.src),s[c.src].resolve().destroy(),delete s[c.src],a>=e.length-1?t.resolve():l(e,t))},r&&(d.src=c.src),i.insertBefore(d,n),void 0)},l=function(e,t){for(;e.cursor<e.length;){{var i=e.cursor,n=e.chain;n[i].script}if(n[i].status<=o.LOADING)break;n[i].status==o.LOADED&&d(e,t),e.cursor++}},u=function(){if(null===t){var e=document.createElement("script");t=e.readyState&&"uninitialized"==e.readyState?!0:!1}return t},h=function(){i||(i=document.head||document.getElementsByTagName("head")[0]),n||(n=i.firstChild)},f=function(t){e.isEmpty(t)||(!e.isArray(t)&&(t=[t]),e.each(t,function(t){var i=e.cache("loadedJS");i||(i={},e.cache("loadedJS",i)),i[t]=!0}))},p=function(t){e.isEmpty(t)||(!e.isArray(t)&&(t=[t]),e.each(t,function(t){var i=e.cache("loadedCSS");i||(i={},e.cache("loadedCSS",i)),i[t]=!0}))},g=function(t,i){var n="js"==i?e.cache("loadedJS"):e.cache("loadedCSS");if(e.isArray(t)||(t=Array(t)),e.isEmpty(n))return t;var s=[];return e.each(t,function(e){e in n||s.push(e)}),s};e.loadCSS=r,e.loadJS=a,e.cacheLoadedCSS=p,e.cacheLoadedJS=f}((this||window).MC),function(e){var t={},i={INIT:1,LOADING:2,LOADED:3,EXECUTED:4,COMPLETE:5},require=function(t,i){if(!e.isArray(t)&&(t=Array(t)),e.isEmpty(t))return null;var s=[];if(e.each(t,function(e){var t=n(e);s.push(t)}),e.isFunction(i)){var o=null;if(1===s.length)o=s[0].promise4LoadJS;else{var r=[];e.each(s,function(e){e.promise4LoadJS&&r.push(e.promise4LoadJS)}),o=e.Promise.all(r)}e.isEmpty(o)?d(t,i):o.then(function(){d(t,i)},function(){e.log("Module load failure: "+t.toString())})}if(1===s.length)return s[0].exports;var a=[];return e.each(s,function(e){a.push(e.exports)}),a},define=function(t,i,n){return 1===arguments.length?(n=t,t=null):2===arguments.length&&(e.isArray(arguments[0])&&(i=t,n=i,t=null),n=i),null==t&&n?(n.call(),void 0):(a(t,n),void 0)},n=function(t){var n=s(t);if(n.status>=i.LOADING)return n;n.status=i.LOADING;var o=e.getModResById(t);return e.isEmpty(o)?(a(t),n):(e.isEmpty(o.css)||e.loadCSS(o.css),e.isEmpty(o.js)||(n.promise4LoadJS=e.loadJS(o.js).then(function(){n.status=i.EXECUTED,r(n)})),n)},s=function(e){var i=t[e];return!i&&(i=o(e)),i},o=function(e){return t[e]={status:i.INIT,exports:{}}},r=function(e){if(e.status===i.EXECUTED){if(e.define){var exports=e.define.call(null,e.exports);exports&&(e.exports=exports)}e.status=i.COMPLETE,delete e.define}},a=function(e,t){var n=s(e);t?(n.status=i.EXECUTED,n.define=t,r(n)):n.status=i.COMPLETE,c(e)},c=function(t){var i=e.getModResById(t);e.cacheLoadedJS(i.js),e.cacheLoadedCSS(i.css)},d=function(t,i){var n=[];e.each(t,function(e){n.push(s(e).exports)});try{i.apply(null,n)}catch(o){e.error(o,t[0]+": mod doCallback error")}};e.require=require,e.define=define}((this||window).MC),function(e){var t=function(t){var s=i(t),o=e.config("modsRes");e.isEmpty(o)&&(o={},e.config("modsRes",o)),e.merge(o,s),n(o)},i=function(t){var i={},n=t.basePath||"",s=t.pkg,a=t.mod;return e.each(s,function(t){var s=t.pkgBase||"";e.each(t.shortIds,function(a){var c=s?s+"/"+a:a,d={js:o(c+".js",n)};if(e.isEmpty(t.css)||(d.css=r(t.css,n,s)),!e.isEmpty(t.deps)){var l=t.deps[a];l&&(d.deps=l)}i[c]=d})}),e.each(a,function(t,s){var a=i[s];e.isEmpty(a)&&(i[s]=a={}),e.isString(t)?a.js=[o(t,n)].concat(a.js||[]):(e.isEmpty(t.js)||(a.js=r(t.js,n).concat(a.js||[])),e.isEmpty(t.css)||(a.css=r(t.css,n).concat(a.css||[])),e.isEmpty(t.deps)||(a.deps=t.deps.concat(a.deps||[])))}),i},n=function(t){e.each(t,function(i){if(!e.isEmpty(i.deps)){var n=[],o=[];e.each(i.deps,function(e){var i=s(e,t);i.js&&(n=n.concat(i.js||[])),i.css&&(o=o.concat(i.css||[]))}),i.js=a(n.concat(i.js||[])),i.css=a(o.concat(i.css||[])),i.deps.length=0,delete i.deps}})},s=function(t,i){var n=i[t]||{};if(e.isEmpty(n.deps))return n;var o={js:[],css:[]},r=a(n.deps);return e.each(r,function(t){var n=i[t];if(!e.isEmpty(n)){if(!e.isEmpty(n.deps)){var r=a(n.deps);e.each(r,function(t){var n=s(t,i);e.isEmpty(n)||(n.js&&(o.js=o.js.concat(n.js||[])),n.css&&(o.css=o.css.concat(n.css||[])))})}n.js&&(o.js=o.js.concat(n.js||[])),n.css&&(o.css=o.css.concat(n.css||[]))}}),n.js&&(o.js=o.js.concat(n.js||[])),n.css&&(o.css=o.css.concat(n.css||[])),o.js&&(o.js=a(o.js)),o.css&&(o.css=a(o.css)),o},o=function(t,i){if(0===t.indexOf("http://"))return t=t.replace(/\${basePath}/gi,i);var n=!1;t=t.replace(/\${basePath}\//gi,function(){return n=!0,""}),(n||0!==t.indexOf("/"))&&(t=i+"/"+t);var s=null;/\.css$/.test(t)?"undefined"!=typeof MC_CSS_MAP&&(s=MC_CSS_MAP[t])&&(t=s):"undefined"!=typeof MC_JS_MAP&&(s=MC_JS_MAP[t])&&(t=s),0!==t.indexOf("/")&&(t=(e.config("resBasePath")||"")+"/"+t);var o=e.config("resDomain");return o&&(t="http://"+o+t),t},r=function(t,i,n){if(e.isEmpty(t)||!e.isString(t)&&!e.isArray(t))return[];var s=[],r=e.isString(t)?[t]:t;return e.each(r,function(e){n&&!/^[\/|\$]/.test(e)&&(e=n+"/"+e),s.push(o(e,i))}),s},a=function(e){for(var t,i=[],n=0,s=e.length;s>n;n++)t=e[n],-1===i.indexOf(t)&&i.push(t);return i},c=function(t){var i=e.config("modsRes"),n=i[t],s={};return e.isEmpty(n)?s:(!e.isEmpty(n.js)&&(s.js=n.js),!e.isEmpty(n.css)&&(s.css=n.css),s)};e.setModRes=t,e.getModResById=c}((this||window).MC),function(e){var t=e.MC;t.pageYOffset=function(){return window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop},t.screenHeight=function(){return window.innerHeight||Math.min(document.documentElement.clientHeight||document.body.clientHeight,document.body.clientHeight||document.documentElement.clientHeight)},t.isWeixin=function(){var e=navigator.userAgent.toLowerCase();return"micromessenger"==e.match(/MicroMessenger/i)},t.isIE7D=function(){return/msie 7/.test(navigator.userAgent.toLowerCase())||/msie 6/.test(navigator.userAgent.toLowerCase())}}(this||window),function(e){var t=e.MC;t.getInputPosition=function(e){if(document.selection){e.focus();var i=document.selection.createRange();return{left:i.boundingLeft,top:i.boundingTop,bottom:i.boundingTop+i.boundingHeight}}var s="{$clone_div}",o="{$cloneLeft}",r="{$cloneFocus}",a='<span style="white-space:pre-wrap;"> </span>',c=e[s]||document.createElement("div"),d=e[r]||document.createElement("span"),l=e[o]||document.createElement("span"),u=(t.domOffset(e),t.getInputIndex(e)),h={left:0,top:0};e[s]||(e[s]=c,e[r]=d,e[o]=l,c.appendChild(l),c.appendChild(d),document.body.appendChild(c),d.innerHTML="|",d.style.cssText="display:inline-block;width:0px;overflow:hidden;z-index:-100;word-wrap:break-word;word-break:break-all;",c.className=n(e),c.style.cssText="visibility:hidden;display:inline-block;position:absolute;z-index:-100;word-wrap:break-word;word-break:break-all;overflow:hidden;"),c.style.left=t.domOffset(e).left+"px",c.style.top=t.domOffset(e).top+"px";var f=e.value.substring(0,u).replace(/</g,"<").replace(/>/g,">").replace(/\n/g,"<br/>").replace(/\s/g,a);l.innerHTML=f,d.style.display="inline-block";try{h=t.domOffset(d)}catch(p){}return d.style.display="none",{left:h.left,top:h.top,bottom:h.bottom}},t.domOffset=function(e){var t=e.getBoundingClientRect(),i=e.ownerDocument,n=i.body,s=i.documentElement,o=s.clientTop||n.clientTop||0,r=s.clientLeft||n.clientLeft||0,a=t.top+(self.pageYOffset||s.scrollTop)-o,c=t.left+(self.pageXOffset||s.scrollLeft)-r;return{left:c,top:a,right:c+t.width,bottom:a+t.height,width:t.width,height:t.height}},t.getInputIndex=function(e){var t=0;if(document.selection){e.focus();var i=document.selection.createRange();if("TEXTAREA"===e.nodeName){var n=i.duplicate();n.moveToElementText(e);for(var t=-1;n.inRange(Sel);)n.moveStart("character"),t++}else"INPUT"===e.nodeName&&(i.moveStart("character",-e.value.length),t=i.text.length)}else(e.selectionStart||"0"==e.selectionStart)&&(t=e.selectionStart);return t},t.scrollTo=function(e,t,i){var n=i?$("#"+i):$("html, body");n.animate({scrollTop:e||0},t||0)},t.isInViewPort=function(e,t,i,n,s){var o=e.getBoundingClientRect();if(!(o.top||o.bottom||o.left||o.right))return!1;var r={top:o.top,bottom:o.bottom},a=t?t.getBoundingClientRect():null;return a&&(r.top=o.top-a.top,r.bottom=o.bottom-a.bottom),r.top=r.top+i,r.bottom=r.bottom+i,r.top<n+i+(s||0)&&r.bottom>i-(s||0)};var i={},n=function(e,t){if(!t&&e["${cloneName}"])return e["${cloneName}"];var i,n,r=/^(number|string)$/,a=/^(content|outline|outlineWidth)$/,c=[],d=e.style;for(n in d)a.test(n)||(val=o(e,n),""!==val&&r.test(typeof val)&&(n=n.replace(/([A-Z])/g,"-$1").toLowerCase(),c.push(n),c.push(":"),c.push(val),c.push(";")));return c=c.join(""),e["${cloneName}"]=i="clone"+(new Date).getTime(),s("."+i+"{"+c+"}"),i},s=function(e){var t=i[document];t||(t=i[document]=document.createElement("style"),document.getElementsByTagName("head")[0].appendChild(t)),t.styleSheet&&(t.styleSheet.cssText+=e)||t.appendChild(document.createTextNode(e))},o="getComputedStyle"in window?function(e,t){return getComputedStyle(e,null)[t]}:function(e,t){return e.currentStyle[t]}}(this||window),function(e){var t=e.MC;t.imgHtml=function(e,i){if(!i)return t.genHtml("img",null,{src:e});var n=t.merge({src:e},i.options),s=i.dftSrc||t.config("dftImg"),o=i.dftLazySrc||t.config("dftLazySrc");return i.lazy?(n["mc-lazyload"]=e,s!=o&&(n["mc-errorsrc"]=s),n.src=o):n.onerror="this.src='"+s+"';this.onerror=null;",t.genHtml("img",null,n,i.css)},t.genHtml=function(e,i,n,s){var o=s?t.cssStr(s):"";o&&(n.style=(n.style||"")+o);var r="<"+e+" "+t.optStr(n)+(null===i?"/>":[">",i,"</",e,">"].join(""));return r},t.optStr=function(e){var i=[];return t.each(e,function(e,n){null===e||t.isEmpty(n)||i.push([n,'="',e,'"'].join(""))}),i.join(" ")},t.cssStr=function(e){var i=[];return t.each(e,function(e,n){t.isEmpty(e)||t.isEmpty(n)||i.push(n+":"+e+";")}),i.join("")},t.placeholder=function(e,t,n){var s=$("#"+e),o=s.parent(),r=null;o.css("position","relative"),o.append('<span class="placeholder '+(n||"")+'">'+t+"</span>"),r=o.find(".placeholder"),s.off("blur.placeholder").on("blur.placeholder",function(){i(s,r)}).off("keyup.placeholder").on("keyup.placeholder",function(){i(s,r)}).off("change.placeholder").on("change.placeholder",function(){i(s,r)}).off("paste.placeholder").on("paste.placeholder",function(){i(s,r)}),r.off("click").on("click",function(){return s.trigger("focus"),!1})};var i=function(e,t){var i=e.val();MC.isEmpty(i)?t.show():t.hide()}}(this||window),function(e){var t=e.MC;t.ajax=function(e){if(!e||!e.url)return null;t.isString(e)&&(e={url:e}),t.Event.trigger("ajaxBefore",e);var i=new t.Promise;return $.ajax(t.merge(t.merge({dataType:"json",contentType:"application/x-www-form-urlencoded"},e),{success:function(n){return!n||n.success||"csrftoken error"!=n.message||e.csrfReSended?(t.Event.trigger("ajaxSuccess",n),t.isFunction(e.success)&&e.success.call(e.scope,n),i.resolve(n),void 0):(e.csrfReSended=!0,t.get({url:"/auth/newCsrftoken",success:function(n){GB.sysParam("csrftoken",n.csrftoken),t.ajax(e).then(function(e){i.resolve(e)},function(e){i.reject(e)})}}),void 0)},error:function(n){return n&&n.responseText&&"csrftoken error"==n.responseText&&!e.csrfReSended?(e.csrfReSended=!0,t.get({url:"/auth/newCsrftoken",success:function(n){GB.sysParam("csrftoken",n.csrftoken),t.ajax(e).then(function(e){i.resolve(e)},function(e){i.reject(e)})}}),void 0):(t.Event.trigger("ajaxFailure",n),t.isFunction(e.error)&&e.error.call(e.scope,n),i.reject(n),void 0)},complete:function(i,n){t.isFunction(e.complete)&&e.complete.call(e.scope,n)}})),i},t.post=function(e){return e?(t.isString(e)&&(e={url:e}),e.type="POST",t.ajax(e)):null},t.get=function(e){return e?(t.isString(e)&&(e={url:e}),e.type="GET",t.ajax(e)):null}}(this||window),function(e){var t=e.MC,i={path:"/",domain:window.location.host},n={get:function(e){var t=new RegExp("(?:^|;+|\\s+)"+e+"=([^;]*)"),i=window.document.cookie.match(t);return i?decodeURIComponent(i[1]):""},set:function(e,s,o){n.setDomain();var r=t.merge(t.clone(i),o);if(null===s&&(r.expires=-1),"number"==typeof r.expires){var a=new Date;a.setDate(a.getDate()+r.expires),r.expires=a}return document.cookie=[encodeURIComponent(e),"=",encodeURIComponent(s),r.expires?"; expires="+r.expires.toUTCString():"",r.path?"; path="+r.path:"",r.domain?"; domain="+r.domain:"",r.secure?"; secure":""].join("")},remove:function(e,t){n.set(e,null,t)},clear:function(){n.setDomain();var e=document.cookie.match(new RegExp("([^ ;][^;]*)(?=(=[^;]*)(;|$))","gi"));for(var t in e)n.remove(e[t])},setDomain:function(){i.domain=t.config("cookieDomain")||i.domain}};t.cookie=function(e,t,i){return 0!==arguments.length?1===arguments.length?n.get(e):(n.set(e,t,i),void 0):void 0},t.clearCookie=function(){n.clear()}}(this||window),function(e){e.getUrlHash=function(t,i){var n="";if(i=i||window.location.href||"",i.indexOf("#")>=0&&(n=i.split("#")[1]),!t){var s=n.split("?");!e.isEmpty(s)&&(n=s[0])}return n||""},e.parseHash=function(t){if(e.isEmpty(t)){if(t=window.location.hash,e.isEmpty(t))return null;t=t.substr(1)}var i=t.split("?"),n=i[0],s=i.length>=1?e.urlDecode(i[1]):null;return{nav:n,query:s}},e.urlParam=function(t){if(1===arguments.length){var i={},n=window.location.href,s=n.split("#"),o="";return e.each(s,function(n){var s=n.lastIndexOf("?");if(s>=0){var r=n.substr(s+1);return i=e.urlDecode(r)||{},o=i[t],!1}}),o}},e.urlDecode=function(t,i){if(e.isEmpty(t))return{};var n={},s=t.split("&"),o=null,r=null;return e.each(s,function(e,t){var t=e.indexOf("=");o=decodeURIComponent(e.substr(0,t)),r=decodeURIComponent(e.substr(t+1)),n[o]=!i&&o in n?[].concat(n[o]).concat(r):r}),n}}((this||window).MC),function(e){e.setModRes({basePath:e.config("mcBasePath")||"",pkg:[{pkgBase:"mc/lang",shortIds:["str","date"]},{pkgBase:"mc/widget",shortIds:["autoheight","lazyload","scroll"]},{pkgBase:"mc/widget",shortIds:["loading","prompt"],css:"${basePath}/mc/css/mc.mini.css"},{pkgBase:"mc/widget",shortIds:["checkbox","dialog","grid","input","mask","pagn","radio"],css:"${basePath}/mc/css/mc.css",deps:{grid:["mc/lang/str"],input:["mc/lang/str"]}}]})}((this||window).MC),function(e){e.setModRes({basePath:e.config("libBasePath"),mod:{face:{js:"face/jquery.qqface.js",css:"face/face.css"},galleria:"galleria/galleria-1.3.3.min.js",highcharts:"highcharts.js","jquery.atwho":{js:"jquery.atwho.js",deps:["store"]},"jquery.ui.core":"jquery.ui/jquery.ui.core.min.js","jquery.ui.datepicker":{deps:["jquery.ui.core"],js:"jquery.ui/jquery.ui.datepicker.min.js",css:["jquery.ui/css/jquery-ui.min.css","jquery.ui/css/jquery.ui.datepicker.min.css"]},"jquery.ui.drag":{deps:["jquery.ui.core"],js:"jquery.ui/jquery.ui.drag.custom.min.js"},"jquery.fileupload":{js:["jquery.ui/jquery.ui.widget.js","jquery.iframe-transport.js","jquery.fileupload.js"]},"jquery.autocomplete":{js:"jquery.autocomplete.min.js",css:"mc/css/jquery.autocomplete.css"},"jquery.jcrop":{js:"jcrop/jquery.Jcrop.min.js",css:"jcrop/jquery.Jcrop.css"},rotate:"jquery.rotate.min.js","socket.io":"socket.io.min.js","tc.chart.core":{js:["tc.chart/chart.core.min.js"]},"tc.chart.line":{deps:["tc.chart.core"],js:["tc.chart/chart.line.min.js"]},"tc.chart.doughnut":{deps:["tc.chart.core"],js:["tc.chart/Chart.Doughnut.js"]},youku:"http://player.youku.com/jsapi",wxsdk:"http://res.wx.qq.com/open/js/jweixin-1.0.0.js","baidu.map":"http://api.map.baidu.com/getscript?v=2.0&ak=0824be3f677f51f45b57bbb789cb0d9a",store:"store.min.js",browser:"browser.js"}})}((this||window).MC),MC.define("mc/widget/prompt",function(){var e=300,t=35,i=3e3,n=function(e,t){var i=$(".mc-prompt");i.length>0&&o(i);var n=['<div class="mc-prompt">',"<span>",e,"</span>","</div>"].join(""),s=!1;if(t){var r=$("#"+t),a=r[0].getBoundingClientRect(),c=MC.screenHeight(),d=MC.pageYOffset(),l=a.top+d;l>d&&c+d>l&&(s=!0,$("#"+t).append(n))}s||$("body").append(n),i=$(".mc-prompt");var u=i.width();return i.css("margin-left",(-u/2).toFixed(0)-20+"px"),s&&i.css("position","absolute"),i},s=function(t){t.animate({top:0},e),setTimeout(function(){o(t)},i)},o=function(i){i.animate({top:-1*t},e,function(){$(this).remove()})};return{info:function(e,t){s(n(e,t))}}}),MC.define("mc/widget/mask",function(exports){var e=150;MC.merge(exports,{show:function(t){t||(t=MC.genId("mask"));var i=MC.genHtml("div","",{"class":"mc-mask",id:t},{"z-index":e+=2});return $("body").append(i),$("#"+t)},close:function(t,i){t&&(t.css("z-index")>=e&&(e-=2),i?t.fadeOut("slow",0,function(){$(this).remove()}):t.remove())},resize:function(e){var t=$(document),i=t.outerWidth()||t.width(),n=t.height()||$(document).height();e.height()<n&&e.css("height",n),e.width()<i&&e.css("width",i)}})}),MC.define("mc/widget/dialog",function(exports){var e=function(e){this.init(e)};MC.merge(e.prototype,{init:function(e){this.width=450,this.minHeight=300,MC.merge(this,e||{}),this.seedId=this.seedId||MC.genId("dlg"),this.ctId=this.ctId||this.seedId+"Ct",this.bodyId=this.seedId+"Body",this.closeId=this.seedId+"Close"},getEl:function(){if(this.$ct)return this.$ct;var e=$("#"+this.ctId);return e.length>0?(this.$ct=e,e):null},show:function(){var e=this,t=this.getEl();t||(t=this.create()),MC.isFunction(this.renderContent)&&this.renderContent(this.bodyId),this.bindEvent(),this.position(t),$(window).off("resize."+this.ctId).on("resize."+this.ctId,function(){clearTimeout(this.resizeTimer),this.resizeTimer=setTimeout(function(){e.position()},300)}),MC.require("mc/widget/mask",function(i){var n=e.ctId+"Mask";e.$mask=$("#"+n),e.$mask.length<=0&&(e.$mask=i.show(e.ctId+"Mask")),e.zIndex&&e.$mask.css("z-index",e.zIndex),t.css("z-index",1*e.$mask.css("z-index")+1)})},create:function(){var e=['<div id="',this.ctId,'" class="mc-dlg ',this.dlgCls||"",'">','<div id="',this.closeId,'" class="mc-dlg-close ',this.closeCls||"",'"></div>','<div id="',this.bodyId,'" class="mc-dlg-body">',this.content,"</div>","</div>"].join("");return $("body").append(e),this.$ct=$("#"+this.ctId),this.$ct},close:function(){var e=this;$(window).off("resize."+this.ctId),setTimeout(function(){var t=e.getEl();t&&t.remove(),e.trigger&&e.trigger("close"),e.$ct=null},0),MC.require("mc/widget/mask",function(exports){exports.close(e.$mask)})},position:function(){var e=$(window),t=this.getEl(),i={};if(t){var n=e.width();this.width&&(i.width=String(this.width),i.width.indexOf("%")>0&&(i.width=(n*i.width.replace("%","")/100).toFixed(0)));var s=e.height();this.height&&(i.height=String(this.height),i.height.indexOf("%")>0&&(i.height=(s*i.height.replace("%","")/100).toFixed(0)));var o=i.height||t.height()||this.minHeight,r=e.scrollTop(),a=n-i.width,c=s-o;0>a&&(a=0),0>c&&(c=0),i.left=0>a/2-2?0:a/2-2,i.top=0>r+c/2-2?0:r+c/2-2,t.css(i),this.trigger("afterPosition")}},bindEvent:function(){var e=this;$("#"+this.closeId).off("click").on("click",function(){e.close()})}}),MC.Event.support(e.prototype),exports.Dialog=e}),function(e){var t=MC.config("resDomain")?"http://"+MC.config("resDomain"):"";MC.config("dftLazySrc",t+"/static/images/dft_lazy.gif"),MC.config("dftUserImg",t+"/static/images/dft_user1.png"),MC.config("dftHallImg",t+"/static/images/hall/dft_hall.png"),MC.config("dftImg",t+"/static/images/dft_img.png");var i=null;MC.Event.on("lazyloadImg",function(){i||(i=new(MC.require("mc/widget/lazyload").Lazy)({diff:350}),i.bind()),i.loadHandle()}),MC.Event.on("ajaxBefore",function(e){if(e&&e.type&&"post"===e.type.toLowerCase()){e.data||(e.data={});var t=GB.sysParam("csrftoken");MC.isString(e.data)?(e.data=JSON.parse(e.data),e.data.csrftoken=t,e.data=JSON.stringify(e.data)):e.data.csrftoken=t}}),MC.Event.on("toLoginPage",function(e){MC.require("auth/login",function(exports){exports.pop(e)})}),MC.Event.on("toRegPage",function(e){MC.require("auth/reg",function(exports){exports.pop(e)})}),MC.Event.on("clearMaskAndDlg",function(){$(".mc-dlg").remove(),$(".mc-mask").remove()}),MC.Event.on("refresh4Logined",function(e){var t=null;MC.isEmpty(e)?t=MC.get({url:"/auth/getSes"}):(t=new MC.Promise,t.resolve({data:e})),t.then(function(e){return GB.user(e.data),GB.user().isExpert||GB.user().isAdmin||"city/index"==(MC.cache("modId")||"")?(window.location.reload(),void 0):(MC.Event.trigger("frameDomReady"),MC.Event.trigger("clearMaskAndDlg"),$(document.body).find("[currUserPhoto]").attr("mc-lazyload",GB.user().avatar),$("#ffavorId").attr("href","/user/"+GB.user().id+"#favor").css("display","block"),MC.Event.trigger("lazyloadImg"),void 0)})}),MC.Event.on("checkSSO",function(e){GB.isLogined()||MC.get({url:"http://cia.chanapp.chanjet.com/internal_api/authorizeByJsonp?client_id=community",dataType:"jsonp",success:function(t){if(!GB.isLogined())if(t.code)MC.clearCookie(),MC.get({url:"/auth/codeLogin",data:{code:t.code,csrftoken:GB.sysParam("csrftoken")},success:function(t){if(t||(t={}),1==t.success)MC.Event.trigger("refresh4Logined",t.data.user);else{if(52==t.errorCode||53==t.errorCode)return alert(52==t.errorCode?"\u8d26\u53f7\u672a\u6fc0\u6d3b":"\u8d26\u53f7\u88ab\u7981\u7528"),window.location.replace("/auth/logout"),void 0;MC.isFunction(e)&&e.call(null,null)}},error:function(){MC.isFunction(e)&&e.call(null,null)}});else if(t.auth_code){var i=t.auth_code;MC.isFunction(e)&&e.call(null,i)}}})}),e.GB={user:function(e){return 1!==arguments.length?MC.cache("loginUser")||{}:(MC.isEmpty(e)||MC.cache("loginUser",e),void 0)},isLogined:function(){return!MC.isEmpty(GB.user())},sysParam:function(e,t){var i=MC.cache("sysParams");if(MC.isEmpty(i)&&(i={},MC.cache("sysParams",i)),1===arguments.length){if(!MC.isObject(e))return i[e];MC.merge(i,e)}else i[e]=t},timeNow:function(e){return MC.get({url:"/light/timeNow"}).then(function(t){var i=t.data+"000";return MC.isFunction(e)&&e.call(null,t.data+"000"),i})},pageLoading:function(e){var t=['<div class="f-loading">','<span class="f-loading-icon"></span><br/>','<span class="f-loading-text">\u6b63\u5728\u52a0\u8f7d\u6570\u636e\uff0c\u8bf7\u7a0d\u5019\u2026\u2026</span>',"</div>"].join("");$("#"+e).html(t)},pageInitLoading:function(e){if(gblPrgr){var t=['<div class="f-init">','<div class="loading">','<div class="prgr-ct"><div id="fPrgrScaleId" class="prgr-scale" style="width:',gblPrgr.percentage,'%"></div></div>','<span><span id="fPrgrPctId">',gblPrgr.percentage,"</span>%</span>","</div>","<br/>",'<span class="text">\u6b63\u5728\u52a0\u8f7d\u6570\u636e\uff0c\u8bf7\u7a0d\u5019\u2026\u2026</span>','<div class="bottom"></div>',"</div>"].join("");$("#"+e).html(t),gblPrgr.start()}},getRegSource:function(){return MC.urlParam("regsource")||MC.urlParam("source")||"web"}},MC.merge(e.GB,{isPicExt:function(e){return["png","jpg","jpeg","gif","bmp","ico","psd"].indexOf(e)>=0},fromNow:function(e){if(!e)return"";var t="",i=(new Date).getTime()-1e3*e;return i=(i/1e3).toFixed(0),1>i?"\u521a\u521a":(t=60>i?i+"\u79d2":3600>i?(i/60).toFixed(0)+"\u5206\u949f":86400>i?(i/3600).toFixed(0)+"\u5c0f\u65f6":31536e3>i?(i/86400).toFixed(0)+"\u5929":(i/31536e3).toFixed(0)+"\u5e74",t+"\u524d")}}),MC.merge(e.GB,{baiduHm:function(){window._hmt=window._hmt||[];var e=document.createElement("script");e.src="//hm.baidu.com/hm.js?4e9087384d2e2e1425f638fe37d9809e";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)
},ppb:function(){var e=['<iframe src="/anquan.html" width="83px" height="30px" class="f-anquan" scrolling="no" frameborder="no"></iframe>'].join("");$("#anquanCtId").html(e)}})}(this||window),MC.define("auth/login",function(exports){var e=MC.require("mc/widget/prompt"),t=null,i=function(e){e||(e={}),MC.require("mc/widget/dialog",function(exports){function i(){var t=e.login.app,i=420;return"ee"==t?i=300:"ydz"==t&&(i=400),i}if(!t){var s=MC.genId("dlg");t=new exports.Dialog({width:480,height:i(),zIndex:2e4,closeCls:e.login&&e.login.hideClose?"":"f-icons",content:function(){return['<div id="',s,'" class="login-content"></div>'].join("")}(),renderContent:function(){var i=new n(e?e.login:null);i.render(s,e),i.on("close",function(){t.close()}),t.on("close",function(){MC.isFunction(i.onClose)&&i.onClose()})}})}t.show(),$("#"+t.ctId).removeClass("login-dlg").addClass("login-dlg")})},n=function(e){this.init(e)};MC.merge(n.prototype,{show3P:!0,showReg:!0,init:function(e){MC.merge(this,e||{}),this.seedId=this.seedId||MC.genId("login"),this.app=this.app||"kuaiji",this.loginNameIptId=this.seedId+"loginNameIpt",this.loginPwdIptId=this.seedId+"loginPwdIpt",this.rememberPwdId=this.seedId+"RmbPwd",this.btnId=this.seedId+"Btn",this.regLinkId=this.seedId+"RegLink",this.sinaId=this.seedId+"Sina",this.qqId=this.seedId+"QQ",this.weixinId=this.seedId+"Weixin",this.authCodePromise=this.newPromise()},newPromise:function(){var e=this;return new MC.Promise(function(){var t=this;setTimeout(function(){MC.Event.trigger("checkSSO",function(i){i?(t.resolve(i),e.renderOtherLoginLink(i)):t.reject("\u7f51\u7edc\u4e0d\u7a33\u5b9a\uff0c\u767b\u5f55\u5931\u8d25\uff0c\u53ef\u5237\u65b0\u9875\u9762\u518d\u8bd5\u8bd5")})})})},render:function(e,t){this.renderId=e||this.renderId,$("#"+this.renderId).html(this.html(t)),this.domReady()},renderOtherLoginLink:function(e){var t=this,i=(window.location.href||"").split("#")[0];i+=(i.indexOf("?")>=0?"&":"?")+"checkSSO=1",MC.get({url:"/light/thirdUrl?authCode="+e+"&regsource="+GB.getRegSource()+"&redirect="+encodeURIComponent(i),dataType:"jsonp",success:function(e){t.weiboUrl=e.weibo,t.qqUrl=e.qq,t.weixinUrl=e.weixin,$("#"+t.sinaId).attr("href",t.weiboUrl),$("#"+t.qqId).attr("href",t.qqUrl),$("#"+t.weixinId).attr("href",t.weixinUrl)}})},html:function(e){var t=(window.location.href||"").split("#")[0],i=(MC.urlParam("cooporigin")||"000",this),n=e&&e.login&&0==e.login.show3P?"hidden":"",s=e&&e.login&&0==e.login.showReg?"hidden":"",o="hidden";"ydz"==this.app&&(n="hidden",o="");var r=['<div class="login-3p-title ',n,'"><span class="left"></span>\u4f7f\u7528\u7b2c\u4e09\u65b9\u5e10\u53f7\u514d\u6ce8\u518c\u767b\u5f55<span class="right"></span></div>','<div class="login-3p-links ',n,'">','<a id="',this.qqId,'" class="login-3p-item i-qq" title="QQ\u767b\u9646"></a>','<a id="',this.sinaId,'" class="login-3p-item i-sina" title="\u5fae\u535a\u767b\u9646"></a>','<a id="',this.weixinId,'" class="login-3p-item i-wx" title="\u5fae\u4fe1\u767b\u5f55"></a>',"</div>",'<div class="login-3p-title"><span class="left"></span>\u4f7f\u7528\u7545\u6377\u901a\u5e10\u53f7\u767b\u5f55<span class="right"></span></div>','<div class="login-ipt-ct name login-jy-ct mt20">','<input type="text" id="',this.loginNameIptId,'" class="login-ipt" maxlength="32"/>',"</div>",'<div class="login-ipt-ct pwd login-jy-ct">','<input type="password" id="',this.loginPwdIptId,'" class="login-ipt" />',"</div>",'<a id="',this.btnId,'" class="btn login-3p-item login-jy-btn ',this.app,'">\u767b\u5f55</a>','<div class="login-yj-other">','<a class="login-jy-red ',this.app,'" href="http://i.chanjet.com/login/forget?callback=',t,'" target="_blank">\u5fd8\u8bb0\u5bc6\u7801</a>','<span class="login-jy-reg ',s,'">\u8fd8\u6ca1\u6709\u5e10\u53f7\uff1f<a id="',i.regLinkId,'" class="login-jy-red ',this.app,'" href="javascript:void(0);">\u70b9\u51fb\u6ce8\u518c</a></span>',"</div>",'<div class="login-yj-other login-yj-other-tle ',o,'">\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u65b9\u5f0f\u767b\u5f55</div>','<div class="login-yj-other login-yj-other-icons ',o,'" id="login3pWps">','<div class="l-qq-icon ',this.qqId,'"></div>','<div class="l-weibo-icon ',this.sinaId,'"></div>','<div class="l-weixin-icon ',this.weixinId,'"></div>',"</div>",'<div class="clear"></div>'].join("");return r},domReady:function(){MC.placeholder(this.loginNameIptId,"\u90ae\u7bb1/\u624b\u673a\u53f7"),MC.placeholder(this.loginPwdIptId,"\u5bc6\u7801"),this.bindEvent()},resetBtn:function(e){e.removeClass("disabled loading")},bindEvent:function(){var e=this;$("#"+this.btnId).off("click").on("click",function(){var t=$(this);if(!t.hasClass("loading")){t.addClass("disabled loading");var i=e.doLogin();i?i.then(function(i){i&&e.trigger("close"),e.resetBtn(t)},function(){e.resetBtn(t)}):e.resetBtn(t)}}),$("#"+this.loginNameIptId).trigger("select"),$("#"+this.loginPwdIptId).off("keydown.submit").on("keydown.submit",function(t){13==t.keyCode&&$("#"+e.btnId).trigger("click")}),$("#"+this.regLinkId).off("click").on("click",function(){e.trigger("close"),setTimeout(function(){MC.Event.trigger("toRegPage",{reg:{hideClose:e.hideClose,app:e.app,show3P:e.show3P,showReg:e.showReg}})},0)}),$("#login3pWps>div").on("click",function(){var e=this.className.split(" ")[1];window.open($("#"+e).attr("href"))})},doLogin:function(){var i=this,n={loginName:$("#"+i.loginNameIptId).val(),password:$("#"+i.loginPwdIptId).val(),rememberMe:1};return this.validate(n)?this.authCodePromise.then(function(e){return n.authCode=e,MC.post({url:"/auth/login",data:n})}).then(function(e){if(e||(e={}),e.success)return MC.Event.trigger("refresh4Logined",e.data.user),!0;if(52==e.errorCode||53==e.errorCode)return alert(e.message),window.location.replace("/auth/logout"),!1;var t=e.message||"\u7f51\u7edc\u8fde\u63a5\u4e0d\u7a33\u5b9a\uff0c\u53ef\u91cd\u65b0\u8bd5\u8bd5\uff08"+(e.errorCode||0)+"\uff09";return MC.Promise.reject(t)},function(n){i.authCodePromise=i.newPromise();var s="\u7f51\u7edc\u8fde\u63a5\u4e0d\u7a33\u5b9a\uff0c\u53ef\u91cd\u65b0\u8bd5\u8bd5";return MC.isString(n)&&(s=n),e.info(s,t.ctId),MC.Promise.reject(n)}):!1},validate:function(i){return MC.isEmpty(i.loginName)?(e.info("\u8bf7\u586b\u5199\u767b\u5f55\u90ae\u7bb1/\u624b\u673a\u53f7",t.ctId),!1):MC.isEmpty(i.password)?(e.info("\u8bf7\u586b\u5199\u5bc6\u7801",t.ctId),!1):!0}}),MC.Event.support(n.prototype),exports.pop=i,exports.Login=n}),MC.define("auth/reg",function(exports){var e=MC.require("mc/widget/prompt"),t=null,i=function(e){e||(e={}),MC.require("mc/widget/dialog",function(exports){function i(){var t=e.reg.app,i=490;return"ee"==t?i=300:"ydz"==t&&(i=390),i}if(!t){var s=MC.genId("dlg");t=new exports.Dialog({width:480,height:i(),zIndex:2e4,closeCls:e.reg&&e.reg.hideClose?"":"f-icons",content:function(){return['<div id="',s,'" class="login-content"></div>'].join("")}(),renderContent:function(){var i=new n(e?e.reg:null);i.hideClose=e.hideClose,i.render(s),i.on("close",function(){t.close()}),t.on("close",function(){MC.isFunction(i.onClose)&&i.onClose()})}})}t.show(),$("#"+t.ctId).removeClass("reg-dlg").addClass("reg-dlg")})},n=function(e){this.init(e)};MC.merge(n.prototype,{show3P:!0,showReg:!0,init:function(e){MC.merge(this,e||{}),this.seedId=this.seedId||MC.genId("login"),this.app=this.app||"kuaiji",this.mobileTabId=this.seedId+"mobileTab",this.emailTabId=this.seedId+"emailTab",this.mobileFormCtId=this.seedId+"MobileFormCt",this.emailFormCtId=this.seedId+"EmailFormCt",this.emailFormCtId2=this.seedId+"EmailFormCt2",this.mobileIptId=this.seedId+"mobileIpt",this.mPwdIptId=this.seedId+"mPwdIpt",this.uNameIptId=this.seedId+"uNameIpt",this.vcodeIptId=this.seedId+"vcodeIpt",this.vcodeBtnId=this.seedId+"vcodeBtn",this.codeIptId=this.seedId+"codeIpt",this.codeBtnId=this.seedId+"codeBtn",this.codeInfoId=this.seedId+"codeInfo",this.mobileLabelId=this.seedId+"mobileLabel",this.mNameIptId=this.seedId+"mNameIpt",this.mcBtnId=this.seedId+"mcBtn",this.mBtnId=this.seedId+"mBtn",this.mfBtnId=this.seedId+"mfBtn",this.emailIptId=this.seedId+"emailIpt",this.ePwdIptId=this.seedId+"ePwdIpt",this.eUnameIptId=this.seedId+"eUnameIpt",this.eNameIptId=this.seedId+"eNameIpt",this.eRegCodeIptId=this.seedId+"eRegCodeIpt",this.eBtnId=this.seedId+"eBtn",this.efBtnId=this.seedId+"efBtn",this.efBtnId2=this.seedId+"efBtn2",this.efBackBtnId=this.seedId+"efBackBtn",this.efReSendMailBtnId=this.seedId+"efReSendMailBtn",this.sinaId=this.seedId+"Sina",this.qqId=this.seedId+"QQ",this.weixinId=this.seedId+"Weixin",this.regLoginLinkId=this.seedId+"RegLoginLink",this.authCodePromise=this.newPromise()},newPromise:function(){var e=this;return new MC.Promise(function(){var t=this;setTimeout(function(){MC.Event.trigger("checkSSO",function(i){t.resolve(i),e.renderOtherLoginLink(i)})})})},render:function(e){this.renderId=e||this.renderId,$("#"+this.renderId).html(this.html()),this.domReady()},renderOtherLoginLink:function(e){var t=this,i=(window.location.href||"").split("#")[0];i+=(i.indexOf("?")>=0?"&":"?")+"checkSSO=1",MC.get({url:"/light/thirdUrl?authCode="+e+"&regsource="+GB.getRegSource()+"&redirect="+encodeURIComponent(i),dataType:"jsonp",success:function(e){t.weiboUrl=e.weibo,t.qqUrl=e.qq,t.weixinUrl=e.weixin,$("#"+t.sinaId).attr("href",t.weiboUrl),$("#"+t.qqId).attr("href",t.qqUrl),$("#"+t.weixinId).attr("href",t.weixinUrl)}})},html:function(){var e=0==this.show3P?"hidden":"";"ydz"==this.app&&(e="hidden");var t=(encodeURIComponent("http://"+MC.config("domain")),['<div class="login-3p-title ',e,'"><span class="left"></span>\u4f7f\u7528\u7b2c\u4e09\u65b9\u5e10\u53f7\u514d\u6ce8\u518c\u767b\u5f55<span class="right"></span></div>','<div class="login-3p-links ',e,'"><a id="',this.qqId,'" class="login-3p-item i-qq"></a><a id="',this.sinaId,'" class="login-3p-item i-sina"></a><a id="',this.weixinId,'" class="login-3p-item i-wx"></a></div>','<div class="login-3p-title login-cjt-title ',this.app,'"><span class="left"></span>\u6ce8\u518c\u7545\u6377\u901a\u8d26\u53f7<span class="right"></span></div>','<div class="auth-l reg-jy-wp">','<div class="reg-tab ',this.app,'">','<li id="',this.mobileTabId,'" class="active">\u624b\u673a\u6ce8\u518c</li>','<li id="',this.emailTabId,'">\u90ae\u7bb1\u6ce8\u518c</li>',"</div>",'<div id="',this.mobileFormCtId,'">',this.mobileRegHtml(),"</div>",'<div id="',this.emailFormCtId,'" style="display:none;">',this.emailRegHtml(),"</div>",'<div id="',this.emailFormCtId2,'" style="display:none;"></div>',"</div>"].join(""));return t},mobileRegHtml:function(){var e=['<div class="form-row ipt-ct name">','<input type="text" id="',this.mobileIptId,'" class="auth-ipt" maxlength="32"/>',"</div>",'<div class="form-row reg-vcode">','<div class="ipt-ct fl"><input type="text" id="',this.vcodeIptId,'" class="auth-ipt"/></div>','<div class="action" id="',this.vcodeBtnId,'"><img src="/auth/getVcode" /></div>','<div class="clear"></div>',"</div>",'<div class="reg-btn">',MC.genHtml("a","\u63d0\u4ea4",{id:this.mcBtnId,"class":"btn login-3p-item login-jy-btn "+this.app}),"</div>",'<a id="',this.regLoginLinkId,'" class="go2login-btn">\u5df2\u6709\u5e10\u53f7\uff0c\u7acb\u5373\u767b\u5f55</a>','<div class="reg-terms">','<input type="checkbox" checked="true" class="cb"/>','<label class="text">\u6211\u5df2\u7ecf\u8ba4\u771f\u9605\u8bfb\u5e76\u540c\u610f<a href="http://i.chanjet.com/terms/account.html" target="_blank">\u300a\u670d\u52a1\u6761\u6b3e\u300b</a></label>',"</div>"];return e.join("")},emailRegHtml:function(){var e=['<div class="form-row ipt-ct name">','<input type="text" id="',this.emailIptId,'" class="auth-ipt" maxlength="32"/>',"</div>",'<div class="form-row ipt-ct pwd">','<input type="password" id="',this.ePwdIptId,'" class="auth-ipt" oncopy="return false" onpaste="return false"/>',"</div>",'<div class="form-row ipt-ct name">','<input type="text" id="',this.eUnameIptId,'" class="auth-ipt" oncopy="return false" onpaste="return false"/>',"</div>",'<div class="reg-btn">',MC.genHtml("a","\u63d0\u4ea4",{id:this.eBtnId,"class":"btn login-3p-item login-jy-btn "+this.app}),"</div>",'<a id="',this.regLoginLinkId,'" class="go2login-btn">\u5df2\u6709\u5e10\u53f7\uff0c\u7acb\u5373\u767b\u5f55</a>','<div class="reg-terms">','<input type="checkbox" checked="true" class="cb"/>','<label class="text">\u6211\u5df2\u7ecf\u8ba4\u771f\u9605\u8bfb\u5e76\u540c\u610f<a href="http://i.chanjet.com/terms/account.html" target="_blank">\u300a\u670d\u52a1\u6761\u6b3e\u300b</a></label>',"</div>"];return e.join("")},renderMobileCodeForm:function(i){var n=['<div class="form-row label">','\u624b\u673a\u53f7\uff1a<span id="',this.mobileLabelId,'">',i,"</span>","</div>",'<div class="form-row ipt-ct pwd">','<input type="password" id="',this.mPwdIptId,'" class="auth-ipt" oncopy="return false" onpaste="return false"/>',"</div>",'<div class="form-row ipt-ct name">','<input type="text" id="',this.uNameIptId,'" class="auth-ipt"/>',"</div>",'<div class="form-row reg-code">','<div class="ipt-ct fl"><input type="text" id="',this.codeIptId,'" class="auth-ipt"/></div>','<div class="action">','<div class="btn" id="',this.codeBtnId,'">\u83b7\u53d6\u624b\u673a\u9a8c\u8bc1\u7801</div>','<div class="btn timer" id="',this.codeInfoId,'" style="display:none;">60\u79d2\u540e\u53ef\u91cd\u53d1</div>',"</div>",'<div class="clear"></div>',"</div>",'<div class="reg-btn">',MC.genHtml("a","\u63d0\u4ea4\u5e76\u6ce8\u518c",{id:this.mBtnId,"class":"btn login-3p-item login-jy-btn"}),"</div>"].join("");$("#"+this.mobileFormCtId).html(n),MC.placeholder(this.mPwdIptId,"\u5bc6\u7801\uff08\u81f3\u5c116\u4f4d\uff09"),MC.placeholder(this.uNameIptId,"\u59d3\u540d"),MC.placeholder(this.codeIptId,"\u9a8c\u8bc1\u7801");var s=this;$("#"+this.ePwdIptId).off("keydown.submit").on("keydown.submit",function(e){13==e.keyCode&&$("#"+s.eBtnId).trigger("click")}),$("#"+this.codeBtnId).off("click").on("click",function(){if(MC.isEmpty(i))return e.info("\u8bf7\u8f93\u5165\u624b\u673a\u53f7",t.ctId),!1;var n=$(this);return n.hasClass("loading")?!1:(n.addClass("loading"),MC.post({url:"/api/v1/user/regMobileCode",data:{mobile:i},success:function(i){i.success?s.setCodeTimer():e.info(i.message||"\u83b7\u53d6\u9a8c\u8bc1\u7801\u5931\u8d25\uff0c\u8bf7\u5237\u65b0\u540e\u91cd\u8bd5",t.ctId),n.removeClass("loading")},error:function(){n.removeClass("loading"),e.info("\u83b7\u53d6\u9a8c\u8bc1\u7801\u5931\u8d25\uff0c\u8bf7\u5237\u65b0\u540e\u91cd\u8bd5",t.ctId)}}),void 0)}),$("#"+this.mBtnId).off("click").on("click",function(){s.submitReg(this)})},renderEmailRegStep2:function(){var i=this,n=['<div class="form-row ipt-ct pwd">','<input type="text" id="',this.eRegCodeIptId,'" class="auth-ipt" maxlength="32"/>',"</div>",'<div class="reg-btn">',MC.genHtml("div","\u63d0\u4ea4",{id:this.efBtnId2,"class":"btn "+i.app}),"</div>",'<a id="',this.efBackBtnId,'" class="go2login-btn">\u4e0a\u4e00\u6b65</a>',"<div>\u8bf7\u767b\u5f55\u60a8\u7684 ",i.tmpEmailRegData.email,' \u90ae\u7bb1\uff0c\u67e5\u770b "\u7545\u6377\u901a" \u53d1\u9001\u7ed9\u60a8\u7684\u9a8c\u8bc1\u7801\uff0c\u8f93\u5165\u6fc0\u6d3b\u60a8\u7684\u4e13\u5c5e "\u7545\u6377\u901a\u5e10\u53f7"\uff0c\u7ee7\u7eed\u4f7f\u7528\u6211\u4eec\u4e3a\u60a8\u63d0\u4f9b\u7684\u8f6f\u4ef6\u670d\u52a1\u3002\u6ca1\u6709\u6536\u5230\uff1f<a id="',this.efReSendMailBtnId,'">\u91cd\u65b0\u53d1\u9001</a></div>'].join("");$("#"+this.emailFormCtId).hide(),$("#"+this.emailFormCtId2).html(n).show(),MC.placeholder(this.eRegCodeIptId,"\u8f93\u5165\u90ae\u7bb1\u9a8c\u8bc1\u7801"),$("#"+this.efBtnId2).off("click").on("click",function(){var n=$("#"+i.eRegCodeIptId).val();return MC.isEmpty(n)?(e.info("\u8bf7\u586b\u5199\u90ae\u7bb1\u9a8c\u8bc1\u7801",t.ctId),null):(i.tmpEmailRegData.regCode=n,i.submitReg(this),void 0)}),$("#"+this.efBackBtnId).off("click").on("click",function(){$("#"+i.emailFormCtId).show(),$("#"+i.emailFormCtId2).hide()}),$("#"+this.efReSendMailBtnId).off("click").on("click",function(){$("#"+i.eBtnId).trigger("click"),e.info("\u90ae\u4ef6\u5df2\u7ecf\u91cd\u65b0\u53d1\u9001\uff0c\u8bf7\u68c0\u67e5\u4f60\u7684\u90ae\u7bb1",t.ctId)})},renderNameForm:function(e){var t=this,i=this.isMobileReg(),n=['<div class="form-row ipt-ct name">','<input type="text" id="',i?this.mNameIptId:this.eNameIptId,'" class="auth-ipt" maxlength="32"/>',"</div>",'<div class="reg-btn">',MC.genHtml("div","\u63d0\u4ea4\uff0c\u5373\u53ef\u5b8c\u6210\u6ce8\u518c",{id:i?this.mfBtnId:this.efBtnId,"class":"btn"}),"</div>"].join(""),s="\u53d6\u4e2a\u54cd\u4eae\u70b9\u7684\u6635\u79f0\u5427";i?($("#"+this.mobileFormCtId).html(n),MC.placeholder(this.mNameIptId,s)):($("#"+this.emailFormCtId).html(n),MC.placeholder(this.eNameIptId,s)),$("#"+(i?t.mNameIptId:t.eNameIptId)).off("keydown.submit").on("keydown.submit",function(e){13==e.keyCode&&$("#"+(i?t.mfBtnId:t.efBtnId)).trigger("click")}),$("#"+(i?this.mfBtnId:this.efBtnId)).off("click").on("click",function(){var n=$(this);if(!n.hasClass("loading")){n.addClass("disabled loading");var s=t.updateName(e,$("#"+(i?t.mNameIptId:t.eNameIptId)).val());s?s.then(function(e){e&&(t.app&&"ydz"==t.app?window.location.replace("http://e.uu.com.cn/ydz/status"):window.location.reload()),t.resetBtn(n)},function(){t.resetBtn(n)}):t.resetBtn(n)}})},domReady:function(){MC.placeholder(this.mobileIptId,"\u624b\u673a\u53f7"),MC.placeholder(this.vcodeIptId,"\u9a8c\u8bc1\u7801"),MC.placeholder(this.emailIptId,"\u90ae\u7bb1"),MC.placeholder(this.eUnameIptId,"\u59d3\u540d"),MC.placeholder(this.ePwdIptId,"\u5bc6\u7801\uff08\u81f3\u5c116\u4f4d\uff09"),this.bindEvent()},resetBtn:function(e){e.removeClass("disabled loading")},isMobileReg:function(){return $("#"+this.mobileTabId).hasClass("active")},setCodeTimer:function(){var e=$("#"+this.codeBtnId),t=$("#"+this.codeInfoId);t.show(),e.hide();var i=60,n=setInterval(function(){i-=1,t.html(i+"\u79d2\u540e\u53ef\u91cd\u53d1"),0>=i&&(e.show(),t.hide(),t.html("60\u79d2\u540e\u53ef\u91cd\u53d1"),clearInterval(n))},1e3)},resetDlgHeight:function(e){"ydz"==this.app?$("#"+t.ctId).height("mobile"==e?390:440):"kuaiji"==this.app&&$("#"+t.ctId).height("mobile"==e?490:540)},bindEvent:function(){var i=this;$("#"+this.mobileTabId).off("click").on("click",function(){$(".reg-tab .active").removeClass("active"),$(this).addClass("active"),$("#"+i.mobileFormCtId).show(),$("#"+i.emailFormCtId).hide(),$("#"+i.emailFormCtId2).hide(),i.resetDlgHeight("mobile")}),$("#"+this.emailTabId).off("click").on("click",function(){$(".reg-tab .active").removeClass("active"),$(this).addClass("active"),$("#"+i.mobileFormCtId).hide(),$("#"+i.emailFormCtId).show(),i.resetDlgHeight("email")}),$("#"+this.mobileIptId).trigger("select"),$("#"+this.vcodeBtnId).off("click").on("click",function(){$(this).find("img").attr("src","/auth/getVcode?"+(new Date).getTime())}),$("#"+this.mcBtnId).off("click").on("click",function(){var n=$("#"+i.mobileIptId).val(),s=$("#"+i.vcodeIptId).val();if(MC.isEmpty(n))return e.info("\u8bf7\u8f93\u5165\u624b\u673a\u53f7",t.ctId),!1;if(!/^\d+$/.test(n))return e.info("\u624b\u673a\u683c\u5f0f\u4e0d\u6b63\u786e",t.ctId),!1;if(MC.isEmpty(s))return e.info("\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801",t.ctId),!1;var o=$(this);return o.hasClass("loading")?!1:(o.addClass("loading"),MC.post({url:"/auth/mobileRegFirstStep",data:{mobile:n,vcode:s},success:function(s){s.success?i.renderMobileCodeForm(n):(e.info(s.message||"\u7f51\u7edc\u4e0d\u7a33\u5b9a\uff0c\u53ef\u4ee5\u5237\u65b0\u9875\u9762\u518d\u8bd5\u8bd5"+(s.errorCode||""),t.ctId),$("#"+i.vcodeBtnId).trigger("click")),o.removeClass("loading")},error:function(){o.removeClass("loading"),e.info("\u7f51\u7edc\u4e0d\u7a33\u5b9a\uff0c\u53ef\u4ee5\u5237\u65b0\u9875\u9762\u518d\u8bd5\u8bd5",t.ctId),$("#"+i.vcodeBtnId).trigger("click")}}),void 0)}),$("#"+this.eBtnId).off("click").on("click",function(){var n=i.getData(!1);n&&(i.tmpEmailRegData=n,MC.post({url:"/auth/sendRegEmailCode",data:{email:i.tmpEmailRegData.email,app:i.app},success:function(n){n.success?i.renderEmailRegStep2():e.info(n.message||"\u7f51\u7edc\u4e0d\u7a33\u5b9a\uff0c\u53ef\u4ee5\u5237\u65b0\u9875\u9762\u518d\u8bd5\u8bd5"+(n.errorCode||""),t.ctId)}}))}),$("[id="+this.regLoginLinkId+"]").off("click").on("click",function(){i.trigger("close"),setTimeout(function(){MC.Event.trigger("toLoginPage",{login:{hideClose:i.hideClose,app:i.app,show3P:i.show3P,showReg:i.showReg}})},0)})},getData:function(e){var t={invite:MC.urlParam("invite")||""};return e?MC.merge(t,{mobile:$("#"+this.mobileLabelId).text()||"",password:$("#"+this.mPwdIptId).val()||"",name:$("#"+this.uNameIptId).val()||"",registCode:$("#"+this.codeIptId).val()||"",type:"mobile"}):MC.merge(t,{email:$("#"+this.emailIptId).val()||"",name:$("#"+this.eUnameIptId).val()||"",password:$("#"+this.ePwdIptId).val()||"",regCode:""}),this.validate(t,e)?t:null},validate:function(i,n){var s=t.ctId;if(n){if(MC.isEmpty(i.registCode))return e.info("\u8bf7\u586b\u5199\u9a8c\u8bc1\u7801",s),!1}else{if(MC.isEmpty(i.email))return e.info("\u8bf7\u586b\u5199\u90ae\u7bb1",s),!1;if(!/^(\w-*\.*)+@(\w-?)+(\.\w{2,})+$/.test(i.email))return e.info("\u90ae\u7bb1\u683c\u5f0f\u4e0d\u6b63\u786e",s),!1;if(MC.isEmpty(i.name))return e.info("\u8bf7\u586b\u5199\u59d3\u540d",s),!1}return MC.isEmpty(i.password)?(e.info("\u8bf7\u586b\u5199\u5bc6\u7801",s),!1):i.password.length<6?(e.info("\u5bc6\u7801\u4e0d\u80fd\u5c11\u4e8e6\u4f4d",s),!1):!0},validateNickName:function(e){var t=/[^a-zA-Z0-9_\u4e00-\u9fa5]/g;return!t.test(this.trim(e))},trim:function(e){return MC.isEmpty(e)?"":String(e).replace(/^\s+|\s+$/g,"")},submitReg:function(e){var t=$(e);if(!t.hasClass("loading")){t.addClass("disabled loading");var i=this;this.authCodePromise.then(function(e){var n=i.doReg(e);n?n.then(function(e){e&&e.success&&window.location.reload()},function(){i.resetBtn(t)}):i.resetBtn(t)})}},doReg:function(i){var n,s=this,o=this.isMobileReg();return n=o?this.getData(o):s.tmpEmailRegData,MC.isEmpty(n)?null:(n.authCode=i||"",n.app=this.app||"",n.regsource=GB.getRegSource(),MC.post({url:"/api/v1/user",data:n}).then(function(e){if(e||(e={}),e.success)return e;var t="\u6ce8\u518c\u5931\u8d25\uff1a"+(e.message||"\u7f51\u7edc\u4e0d\u7a33\u5b9a("+(e.errorCode||0)+")");return MC.Promise.reject(t)},function(i){s.authCodePromise=s.newPromise();var n="\u6ce8\u518c\u5931\u8d25\uff1a\u7f51\u7edc\u4e0d\u7a33\u5b9a";if(MC.isString(i))n=i;else try{n=JSON.parse(i.responseText).message}catch(o){}return e.info(n,t.ctId),MC.Promise.reject(i)}))},updateName:function(i,n){var s=this;return MC.isEmpty(n)?(e.info("\u8bf7\u586b\u5199\u6635\u79f0",t.ctId),null):s.validateNickName(n)?MC.post({url:"/api/v1/user/updateName",data:{userId:i,name:n}}).then(function(e){if(e&&e.success)return!0;var t=e.message||"\u7f51\u7edc\u4e0d\u7a33\u5b9a\uff0c\u53ef\u5237\u65b0\u9875\u9762\u518d\u8bd5\u8bd5("+(e.errorCode||0)+")";return MC.Promise.reject(t)},function(i){var n="\u7f51\u7edc\u4e0d\u7a33\u5b9a\uff0c\u53ef\u5237\u65b0\u9875\u9762\u518d\u8bd5\u8bd5";if(MC.isString(i))n=i;else try{var s=JSON.parse(i.responseText);!s.data||401!=s.data.errorCode&&11001!=s.data.errorCode||(n="\u6635\u79f0\u5df2\u88ab\u5360\u7528")}catch(o){}return e.info(n,t.ctId),!1}):(e.info("\u6635\u79f0\u53ea\u80fd\u5305\u542b\u4e2d\u6587\u3001\u5b57\u6bcd\u3001\u6570\u5b57\u548c\u4e0b\u5212\u7ebf",t.ctId),null)}}),MC.Event.support(n.prototype),exports.pop=i,exports.Register=n}),MC.define("ydz/index",function(){var e=$("body"),t=$(window),i=function(){e.on("click","#loginBtnId",function(){s()}).on("click","#regBtnId, #pageRegBtnId",function(){o()}),$("#applyYdzBtnId").off("click").on("click",function(){var e=$(this),t=MC.require("mc/widget/prompt");return e.hasClass("loading")?!1:($(this).addClass("loading"),$(".open-ydz").html("\u6b63\u5728\u8fdb\u5165"),MC.post({url:"/api/v1/ydz/apply"}).then(function(e){return 0===e.errorCode?(window.location.replace("/ydz/status"),!0):MC.Promise.reject(e.message||"\u7533\u8bf7\u5931\u8d25\uff08"+(e.errorCode||"1")+"\uff09")},function(i){var n="\u7533\u8bf7\u5931\u8d25\uff1a\u7f51\u7edc\u4e0d\u7a33\u5b9a";MC.isString(i)&&(n=i),t.info(n),e.removeClass("loading"),$(".open-ydz").html("\u70b9\u51fb\u8fdb\u5165")}),void 0)}),t.on("resize",function(){var t=$(this);t.width()<=1280?e.addClass("scroll"):e.removeClass("scroll")}).trigger("resize")},n=function(e){var t=e&&e.action;if("login"==t)s(e);else if("index"==t){var i=navigator.userAgent.toLowerCase();if(i.indexOf("iphone")>-1||i.indexOf("ipad")>-1){var n=new RegExp("(?:^|;+|\\s+)ciaRedirect=([^;]*)"),o=window.document.cookie.match(n);if(!o||!o[1])return window.document.cookie="ciaRedirect=1; path=/;",window.location.replace("http://cia.chanapp.chanjet.com/internal_api/authorize?client_id=community&redirect_uri=http://e.uu.com.cn"),void 0}r()}else if("error"==t){var a=MC.require("mc/widget/prompt");a.info("1501"==e.errorCode?"\u60a8\u7684\u8d26\u53f7\u65e0\u6cd5\u4f7f\u7528\u6613\u4ee3\u8d26\uff0c\u53ef\u4ee5\u8054\u7cfb\u7ba1\u7406\u5458":"\u7f51\u7edc\u8fde\u63a5\u4e0d\u7a33\u5b9a\uff0c\u53ef\u4ee5\u9000\u51fa\u540e\u518d\u8bd5\u8bd5\uff08"+(e.errorCode||"1")+"\uff09")}},s=function(e){var t={app:"ydz"};e&&"cnyebc"==e.from&&(t.showReg=!1,t.show3P=!1,t.hideClose=!0),MC.Event.off("refresh4Logined"),MC.Event.on("refresh4Logined",function(){window.location.replace("/ydz/status")}),MC.Event.trigger("toLoginPage",{login:t})},o=function(){MC.Event.off("refresh4Logined"),MC.Event.on("refresh4Logined",function(){window.location.replace("/ydz/status")}),MC.Event.trigger("toRegPage",{reg:{app:"ydz",show3P:!1}})},r=function(){MC.Event.off("refresh4Logined"),MC.Event.on("refresh4Logined",function(){window.location.replace("/ydz/status")}),MC.Event.trigger("checkSSO")},a=function(){},c=function(e){e||(e={});var t=$('.ee-home-menu a[href$="'+e.menuActive+'"]');t.length>0?t.parent().addClass("active"):$(".ydz-menu.ee-home-menu li").eq(0).addClass("active")},d=function(){};return{bindEvent:i,doAction:n,showSearchBox:a,showActiveMenu:c,autoPageHeight:d}});